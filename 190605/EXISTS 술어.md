### EXISTS 술어

Q) SCOTT이 소속된 부서의 직원들의 정보를 조회하시오.

```SQL
SELECT e1.DEPTNO, d.LOC, d.DNAME, e1.ENAME, e1.SAL FROM EMP e1, DEPT d
WHERE d.DEPTNO = e1.DEPTNO
AND e1.DEPTNO IN (
   SELECT DEPTNO FROM EMP
   WHERE ENAME = 'SCOTT'
)
```

Q) DALLAS에 있는 직원의 정보를 조회하시오

```SQL
SELECT e1.DEPTNO, d.LOC, d.DNAME, e1.ENAME, e1.SAL 
FROM EMP e1, DEPT d
WHERE d.DEPTNO = e1.DEPTNO
AND EXISTS (
   SELECT d2.DEPTNO FROM EMP e2, DEPT d2
   WHERE d2.LOC = 'DALLAS'
   AND d2.DEPTNO = e2.DEPTNO
   AND e1.DEPTNO = e2.DEPTNO
)

SELECT e1.DEPTNO, d.LOC, d.DNAME, e1.ENAME, e1.SAL 
FROM EMP e1, DEPT d
WHERE d.DEPTNO = e1.DEPTNO
AND EXISTS (
   SELECT DEPTNO FROM EMP
   WHERE LOC = 'DALLAS'
)
```

Q) 매니저인 직원을 조회하시오

+) JONES가 속한 JOB의 직원을 조회하시오

+) 단, 직원의 부서명과 지역을 출력하시오

```SQL
SELECT ENAME, JOB FROM EMP
WHERE JOB = 'MANAGER'
-- +)
SELECT ENAME, JOB FROM EMP
WHERE JOB IN (
    SELECT JOB FROM EMP 
    WHERE ENAME = 'JONES'
)
-- EXISTS로 변형
SELECT ENAME, JOB FROM EMP e1
WHERE EXISTS(
    SELECT JOB FROM EMP e2
    WHERE ENAME = 'JONES'
    AND e1.JOB = e2.JOB
)
-- +)
SELECT e1.ENAME, e1.JOB, d.DNAME, d.LOC FROM EMP e1, DEPT d
WHERE EXISTS(
    SELECT JOB FROM EMP e2
    WHERE e2.ENAME = 'JONES'
    AND e1.JOB = e2.JOB
)
AND e1.DEPTNO = d.DEPTNO;
```

